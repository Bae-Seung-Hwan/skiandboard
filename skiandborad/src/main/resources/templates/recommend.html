<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<th:block th:replace="~{fragments/_head :: head}"></th:block>
  <!-- ì¶”ì²œ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ -->
  <style>
    .recommend-page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 24px 16px 40px;
    }

    .recommend-mast h1 {
      font-size: 2rem;
      margin-bottom: 4px;
    }

    .recommend-mast .sub {
      color: #6b7280;
      margin: 0;
    }

    /* ì „ì²´ ë ˆì´ì•„ì›ƒ: ì™¼ìª½ ë¦¬ìŠ¤íŠ¸ + ì˜¤ë¥¸ìª½ í•„í„° */
    .recommend-layout {
      margin-top: 20px;
      display: grid;
      grid-template-columns: minmax(0, 1.5fr) minmax(260px, 1fr);
      gap: 24px;
      align-items: flex-start;
    }

    /* í•„í„° ì¹´ë“œ */
    .recommend-filter-card {
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      padding: 16px 18px;
      background: #f9fafb;
    }
    .recommend-filter-card h3 {
      margin: 0 0 8px;
      font-size: 1rem;
    }
    .recommend-filter-card .field-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
      font-size: 0.9rem;
    }
    .recommend-filter-card label {
      color: #4b5563;
      font-size: 0.85rem;
    }
    .recommend-filter-card select,
    .recommend-filter-card input {
      width: 100%;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      font-size: 0.9rem;
    }
    .recommend-filter-card button {
      margin-top: 10px;
      width: 100%;
      padding: 8px 10px;
      border-radius: 999px;
      border: none;
      background: #2563eb;
      color: #fff;
      font-size: 0.9rem;
      cursor: pointer;
    }
    .recommend-filter-card button:hover {
      background: #1d4ed8;
    }

    /* ì¶”ì²œ ê²°ê³¼ ì¹´ë“œ ê·¸ë¦¬ë“œ */
    .recommend-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 18px;
      margin-top: 12px;
    }

    .recommend-card {
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      padding: 16px 18px;
      background: #ffffff;
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.05);
      transition: 0.2s ease;
    }
    .recommend-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.12);
    }
    .recommend-card h3 {
      margin: 0 0 4px;
      font-size: 1.1rem;
    }
    .recommend-card h3 a {
      color: #111827;
      text-decoration: none;
    }
    .recommend-card h3 a:hover {
      text-decoration: underline;
    }
    .recommend-score {
      font-size: 0.9rem;
      font-weight: 600;
      color: #2563eb;
      margin-bottom: 6px;
    }
    .recommend-meta {
      font-size: 0.85rem;
      color: #4b5563;
      line-height: 1.5;
    }
    .recommend-tags {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .recommend-tag {
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
    }

    /* íƒ­ ë²„íŠ¼ / íŒ¨ë„ */
    .tab {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .tab.active {
      background: #2563eb;
      color: #fff;
      border-color: #2563eb;
    }
    .tab-panel { display:none; }
    .tab-panel.active { display:block; }

    .empty {
      font-size:0.9rem;
      color:#9ca3af;
    }
    .loading, .error {
      font-size:0.9rem;
      color:#4b5563;
    }
  </style>
</head>
<body>
<header th:replace="~{fragments/_nav :: nav}"></header>

<main class="recommend-page">
  <section class="mast recommend-mast">
    <h1>ìŠ¤í‚¤ì¥ ì¶”ì²œ</h1>
    <p class="sub">ë‚´ ìœ„ì¹˜ì™€ ì¡°ê±´ì„ ë°”íƒ•ìœ¼ë¡œ ì˜¤ëŠ˜ ê°ˆë§Œí•œ ìŠ¤í‚¤ì¥ì„ ì°¾ì•„ë“œë ¤ìš”.</p>
  </section>

  <!-- ì»¨í…ìŠ¤íŠ¸ ê²½ë¡œ (JSì—ì„œ ì‚¬ìš©) -->
  <meta name="ctx" th:content="@{/}" />

  <!-- ì¶”ì²œ ìœ„ì ¯ ë³¸ë¬¸ -->
  <section class="recommend-layout recommend-widget">

    <!-- ğŸŸ¦ ì™¼ìª½: íƒ­ + ì¶”ì²œ ê²°ê³¼ -->
    <div>
      <div style="display:flex; gap:8px; margin-bottom:8px;">
        <button type="button" class="tab active" data-tab="list">ì¶”ì²œ</button>
        <button type="button" class="tab" data-tab="filters">í•„í„°</button>
      </div>

      <p id="recommendSummary"
         style="font-size:0.9rem; color:#4b5563; margin:4px 0 8px;">
        ë‚´ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ê°€ê¹Œìš°ë©´ì„œ ë‚ ì”¨/í˜¼ì¡ë„ ì¢‹ì€ ìˆœìœ¼ë¡œ ì¶”ì²œí•´ìš”.
      </p>

      <!-- ë¦¬ìŠ¤íŠ¸ íƒ­ -->
      <div id="rec-list" class="tab-panel active">
        <!-- ì—¬ê¸° ì•ˆì„ recommend.js ê°€ ì±„ì›€ -->
        <div id="rec-items" class="recommend-grid"></div>
      </div>

      <!-- í•„í„° íƒ­ (ì™¼ìª½ ì•ˆë‚´ìš©) -->
      <div id="rec-filters" class="tab-panel" style="font-size:0.85rem; color:#6b7280;">
        ì˜¤ë¥¸ìª½ì˜ <strong>ê²€ìƒ‰ í•„í„°</strong>ë¥¼ ì‚¬ìš©í•´ì„œ ì¡°ê±´ì„ ì¡°ì ˆí•´ ë³´ì„¸ìš”.
      </div>
    </div>

    <!-- ğŸŸ© ì˜¤ë¥¸ìª½: ê²€ìƒ‰ í•„í„° ì¹´ë“œ -->
    <aside class="recommend-filter-card">
      <h3>ê²€ìƒ‰ í•„í„°</h3>
      <form id="rec-filter-form">
        <div class="field-group">
          <div>
            <label for="rec-skill">ì‹¤ë ¥</label>
            <select id="rec-skill" name="skill">
              <option value="BEGINNER">ì´ˆê¸‰</option>
              <option value="INTERMEDIATE">ì¤‘ê¸‰</option>
              <option value="ADVANCED">ìƒê¸‰</option>
            </select>
          </div>

          <div>
            <label for="rec-gear">ì¥ë¹„</label>
            <select id="rec-gear" name="gear">
              <option value="SKI">ìŠ¤í‚¤</option>
              <option value="BOARD">ë³´ë“œ</option>
              <option value="BOTH">ë‘˜ ë‹¤</option>
            </select>
          </div>

          <div>
            <label for="rec-region">ì§€ì—­</label>
            <select id="rec-region" name="region">
              <option value="ANY">ì „ì²´</option>
              <option value="SEOUL">ìˆ˜ë„ê¶Œ</option>
              <option value="GANGWON">ê°•ì›ê¶Œ</option>
              <option value="JEOLLA">ì „ë¼/ì¶©ì²­</option>
            </select>
          </div>

          <div>
            <label for="rec-transport">ì´ë™ ìˆ˜ë‹¨</label>
            <select id="rec-transport" name="transport">
              <option value="CAR">ìê°€ìš©</option>
              <option value="BUS">ëŒ€ì¤‘êµí†µ</option>
            </select>
          </div>

          <div>
            <label for="rec-maxdist">ìµœëŒ€ ê±°ë¦¬ (km)</label>
            <input id="rec-maxdist" name="maxDistanceKm"
                   type="number" placeholder="ì˜ˆ: 150">
          </div>

          <div style="display:flex; align-items:center; gap:6px; margin-top:4px;">
            <input type="checkbox" id="rec-use-geo">
            <label for="rec-use-geo">ë‚´ ìœ„ì¹˜ ì‚¬ìš©</label>
          </div>

          <div id="rec-geo-status" style="font-size:0.8rem; color:#6b7280;">
            ë¸Œë¼ìš°ì € ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•˜ë©´ í˜„ì¬ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì²œí•´ìš”.
          </div>
        </div>

        <button type="button" id="rec-apply">ì ìš©í•˜ê¸°</button>
      </form>
    </aside>
  </section>
</main>

<!-- ìŠ¤í¬ë¦½íŠ¸: ì—¬ê¸°ì„œ ë”± í•œ ë²ˆë§Œ! -->
<script th:src="@{/js/recommend.js}"></script>
</body>
</html>

