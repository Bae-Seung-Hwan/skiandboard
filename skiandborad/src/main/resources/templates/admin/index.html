<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/_head :: head}"></head>
<body>
<header th:replace="~{fragments/_nav :: nav}"></header>

<main class="page-container" style="max-width:1100px;margin:32px auto;padding:0 16px;">
  <section class="page-header" style="margin-bottom:16px;">
    <h1>관리자 대시보드</h1>
    <p class="page-sub">서비스 현황과 주요 지표를 한눈에 확인할 수 있습니다.</p>
  </section>

  <!-- 상단 카운터 카드 -->
  <section style="display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:20px;">
    <div class="card">
      <h3>회원 수</h3>
      <p style="font-size:1.6rem;font-weight:600;" th:text="${userCount}">0</p>
    </div>
    <div class="card">
      <h3>등록된 스키장</h3>
      <p style="font-size:1.6rem;font-weight:600;" th:text="${resortCount}">0</p>
    </div>
    <div class="card">
      <h3>게시글 수</h3>
      <p style="font-size:1.6rem;font-weight:600;" th:text="${postCount}">0</p>
    </div>
    <div class="card">
      <h3>댓글 수</h3>
      <p style="font-size:1.6rem;font-weight:600;" th:text="${commentCount}">0</p>
    </div>
  </section>

  <!-- 하단: 최근 유저 / 최근 게시글 -->
  <section style="display:grid;grid-template-columns:1fr 1.3fr;gap:16px;">
    <div class="card">
      <h2>최근 가입 회원</h2>
      <table style="width:100%;border-collapse:collapse;">
        <thead>
        <tr>
          <th>ID</th>
          <th>아이디</th>
          <th>닉네임</th>
          <th>권한</th>
          <th>활성</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="u : ${recentUsers}">
          <td th:text="${u.id()}"></td>
          <td th:text="${u.username()}"></td>
          <td th:text="${u.displayName()}"></td>
          <td th:text="${u.role()}"></td>
          <td th:text="${u.enabled()} ? 'Y' : 'N'"></td>
        </tr>
        <tr th:if="${#lists.isEmpty(recentUsers)}">
          <td colspan="5">최근 가입한 회원이 없습니다.</td>
        </tr>
        </tbody>
      </table>
    </div>

    <div class="card">
      <h2>최근 게시글</h2>
      <table style="width:100%;border-collapse:collapse;">
        <thead>
        <tr>
          <th>제목</th>
          <th>작성자</th>
          <th>카테고리</th>
          <th>작성일</th>
          <th>조회수</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="p : ${recentPosts}">
          <td>
            <a th:href="@{|/board/${p.id()}|}" th:text="${p.title()}"></a>
          </td>
          <td th:text="${p.authorName()}"></td>
          <td th:text="${p.category()}"></td>
          <td th:text="${#temporals.format(p.createdAt(),'yyyy-MM-dd HH:mm')}"></td>
          <td th:text="${p.viewCount()}"></td>
        </tr>
        <tr th:if="${#lists.isEmpty(recentPosts)}">
          <td colspan="5">최근 작성된 게시글이 없습니다.</td>
        </tr>
        </tbody>
      </table>
    </div>
  </section>
</main>
</body>
</html>
